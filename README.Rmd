---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# whobcnapp

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![Codecov test coverage](https://codecov.io/gh/databrew/whobcn/branch/main/graph/badge.svg)](https://codecov.io/gh/databrew/whobcn?branch=main)
<!-- badges: end -->

`whobcnapp` is an R package containing utilities for both (a) transforming data per the specifications of the "Data Assessment Report" and and (b) visualizing that data in the form of a production-ready shiny web application.

## Installation

You can install the most recent version of `whobcnapp` from [GitHub](https://github.com/) with the following:

``` r
# install.packages("devtools")
devtools::install_github('databrew/whobcnapp')
```

## Usage

### Data transformation utilities

#### Overview

The functions for "cleaning" data are customized for the formats currently used by the office. In general terms, the work flow is as follows:

- Define an "input" document (a country-specific MS Excel file)
- Run a series of operations on that document, thereby generating...
- An "output" of a series of machine-readable, structured tables ready for (a) upload to a SQL database, (b) manipulation or analysis as flat files using a statistical software, or (c) consumption by a web app.

For further details on the rationale and formats of these transformations, see the "UHC Policy Watch Platform Design: DATA ASSESSMENT REPORT".

#### Walk-through

One starts by preparing the workspace with the necessary packages:

```{r}
library(tidyr)
library(dplyr)
library(lubridate)
library(readxl)
library(whobcnapp)
```

Next, one must define the input file to be transormed. For the purpose of this example, we'll use `BUL_Appendix_tables.xlsx` which is available at

### Web application

To run the web application, reproduce the following code in an R session:

```{r, eval = FALSE}
library(whobcnapp)
whobcnapp::run_app()
```